<h2 class="section-title">Get In Touch</h2>
{{#with resume.basics}}
<div class="contact-grid">
    {{#if email}}
    <div class="contact-item">
        <div class="contact-icon">
            <i class="fas fa-envelope"></i>
        </div>
        <div class="contact-content">
            <div class="contact-label">Email</div>
            <div class="contact-value">
                <a href="mailto:{{email}}">{{email}}</a>
            </div>
        </div>
    </div>
    {{/if}}
    
    {{#if phone}}
    <div class="contact-item">
        <div class="contact-icon">
            <i class="fas fa-phone"></i>
        </div>
        <div class="contact-content">
            <div class="contact-label">Phone</div>
            <div class="contact-value">
                <a href="tel:{{phone}}">{{phone}}</a>
            </div>
        </div>
    </div>
    {{/if}}
    
    {{#if location.city}}
    <div class="contact-item">
        <div class="contact-icon">
            <i class="fas fa-map-marker-alt"></i>
        </div>
        <div class="contact-content">
            <div class="contact-label">Location</div>
            <div class="contact-value">{{location.city}}{{#if location.region}}, {{location.region}}{{/if}}</div>
        </div>
    </div>
    {{/if}}
    
    {{#each profiles}}
    <div class="contact-item">
        <div class="contact-icon">
            {{#if (eq network "LinkedIn")}}
            <i class="fab fa-linkedin"></i>
            {{else if (eq network "Github")}}
            <i class="fab fa-github"></i>
            {{else}}
            <i class="fas fa-link"></i>
            {{/if}}
        </div>
        <div class="contact-content">
            <div class="contact-label">{{network}}</div>
            <div class="contact-value">
                <a href="{{url}}" target="_blank">{{username}}</a>
            </div>
        </div>
    </div>
    {{/each}}
</div>

<!-- Contact Form -->
<div class="contact-form-container">
    <h3 class="contact-form-title">Send a Message</h3>
    <form id="contact-form" class="contact-form">
        <div class="form-group">
            <label for="contact-name">Name</label>
            <input type="text" id="contact-name" name="name" required placeholder="Your name">
        </div>
        <div class="form-group">
            <label for="contact-email">Email</label>
            <input type="email" id="contact-email" name="email" required placeholder="your@email.com">
        </div>
        <div class="form-group">
            <label for="contact-message">Message</label>
            <textarea id="contact-message" name="message" rows="5" required placeholder="Your message..."></textarea>
        </div>
        <button type="submit" class="form-submit" id="submit-btn">
            <span class="btn-text">Send Message</span>
            <span class="btn-sending" style="display: none;">
                <i class="fas fa-spinner fa-spin"></i> Sending...
            </span>
        </button>
        <div class="form-status" id="form-status"></div>
    </form>
</div>

<script>
document.getElementById('contact-form').addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const submitBtn = document.getElementById('submit-btn');
    const btnText = submitBtn.querySelector('.btn-text');
    const btnSending = submitBtn.querySelector('.btn-sending');
    const formStatus = document.getElementById('form-status');
    
    const name = document.getElementById('contact-name').value;
    const email = document.getElementById('contact-email').value;
    const message = document.getElementById('contact-message').value;
    
    // Show sending state
    btnText.style.display = 'none';
    btnSending.style.display = 'inline';
    submitBtn.disabled = true;
    formStatus.className = 'form-status';
    formStatus.textContent = '';
    
    const data = {
        name: name,
        email: email,
        message: message
    };
    
    try {
        const response = await fetch('https://pdubkffb67.execute-api.us-east-1.amazonaws.com/prod/contact', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json; charset=utf-8'
            },
            body: JSON.stringify(data)
        });
        
        if (response.ok) {
            // Success state
            formStatus.className = 'form-status success';
            formStatus.textContent = 'Message sent successfully! I\'ll get back to you soon.';
            document.getElementById('contact-form').reset();
        } else {
            throw new Error('Failed to send message');
        }
    } catch (error) {
        // Error state
        formStatus.className = 'form-status error';
        formStatus.textContent = 'Sorry, something went wrong. Please try again or email me directly.';
    } finally {
        // Reset button state
        btnText.style.display = 'inline';
        btnSending.style.display = 'none';
        submitBtn.disabled = false;
    }
});
</script>
{{/with}}
